{% extends "base.html" %}

{% block main_id %}p-player{% endblock %}

{% block head %}
    <link rel="stylesheet" href="/static/css/player.css">
{% endblock %}

{% block main %}

    <section id="profile">
        <span class="img-wrapper"><img class="js-player-img" src="{{player.medium_thumb()}}"></span>
        <div class="name">
            {{player.name}}
            {% if player.has_emperors_cup() -%}
                {{crate::data::award::Award::EmperorsCup.emoji()}}
            {%- endif %}
        </div>
        <div class="join-date">
            Joined: {{player.join_date.format("%Y-%m-%d")}} via {{player.login_service_name()}}
        </div>
    </section>

    <section id="history">
        <table class="basho-list">
            <thead>
                <tr>
                    <th>Basho</th>
                    <th colspan="5">Picks</th>
                    <th>Score</th>
                    <th>Rank</th>
                </tr>
            </thead>
            <tbody>
                {% for basho in basho_scores -%}
                <tr>
                    <td><a href="{{basho.basho_id.url_path()}}">{{basho.basho_id}}</a></td>

                    {% for rikishi in basho.rikishi %}
                    <td>
                        {% match rikishi %}
                        {% when Some with (r) %} {{r.name}} <span class="win-loss">({{r.wins}}-{{r.losses}})</span>
                        {% when None %}
                        {% endmatch %}
                    </td>
                    {% endfor %}

                    <td class="numeric">{{basho.wins}}</td>
                    <td class="numeric">{{basho.rank}}</td>
                    {% if basho.rank == 1 %}
                        <td>{{crate::data::award::Award::EmperorsCup.emoji()}}</td>
                    {% endif %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </section>

{% endblock %}
